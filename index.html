<!DOCTYPE html>
<html>

<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">


  <title>Form</title>
  <style>
  .valStatus{
    background: #0099ff;
    color: white;
  }
</style>
</head>
<body>
  <form>
    <table border="1" width="600px" align="center">
      <tr height="100px">
        <td colspan="3" align="center"><h2>PERSON PROFILE</h2></td>
      </tr>
      <tr height="40px">
        <td width="100px"><b>Name</b></td>
        <td width="350px"> <input type="text" name="" id='IdInputName'> <br>
        </td>
        <td class="valStatus">Validation Status</td>
      </tr>
      <tr height="40px">
        <td><b>Email</b></td>                
        <td>
          <input id="IdInputEmail" type="text" name=""></td>
          <td class="valStatus">Validation Status</td>
        </tr>
        <tr height="40px">
          <td><b>Gender</b></td>
          <td>
            <input type="radio" name="Gender" value="Male">Male
            <input type="radio" name="Gender" value="Female">Female
            <input type="radio" name="Gender" value="Other">Other
          </td>
          <td class="valStatus" id="IdGenderValStatus">Validation Status</td>
        </tr>
        <tr height="40px">
          <td><b>Date of Birth</b></td>
          <td>
            <input disabled="true" id="day" value="" type="number" name="" style="width: 45px" placeholder="day">/
            <input disabled="true" id="month" value="" type="number" name="" style="width: 45px" placeholder="month">/
            <input id="year" value="" type="number" name="" style="width: 45px" placeholder="year"><i>(dd/mm/yyy)</i>
          </td>
          <td class="valStatus" id="IdDobValStatus">Validation Status</td>
        </tr>
        <tr height="40px">
          <td><b>Blood Group</b></td>
          <td>
            <select id='IdInputBloodGroup'">
              <option value="select">Select</option>
              <option value="A+">A+</option>
              <option value="A-">A-</option>
              <option value="B+">B+</option>
              <option value="B-">B-</option>
            </select>
          </td>
          <td class="valStatus" id="IdBloodGroupValStaus">Validation Status</td>
        </tr>
        <tr height="40px">
          <td><b>Degree</b></td>
          <td>
            <input type="checkbox" name="degree">SSC
            <input type="checkbox" name="degree">HSC
            <input type="checkbox" name="degree">BSc.
            <input type="checkbox" name="degree">MSc.
          </td>
          <td class="valStatus" id="IdDegreeValStatus">Validation Status</td>
        </tr>
        <!-- <tr height="40px">
          <td><b>Photo</b></td>
          <td> <input type="file" name=""></td>
          <td class="valStatus">Validation Status</td>
        </tr>
        <tr> -->
          <td colspan="3" height="40px"></td>
        </tr>
        <tr>
          <td colspan="3" height="40px" align="right">
            <input onclick="validateAll();" type="button" name="" value="Submit">
            <input type="reset" name="" value="Reset">
          </td>
        </tr>
      </table>
    </form>

    <script type="text/javascript">

      //leap year check
      function checkLeapYear(year){
        if(year%4 == 0)
        {
          if(year%100 == 0)
          {
            if(year%400){
              return true;
            }
            else{
              return false;
            }
          }
          else{
            return true;
          }
        }
        else{
          return false;
        }

      }



      //check if it is a character
      function checkCharacter(val){
        val = val.charCodeAt(0);        
        switch(true)
        {
          case (val>=65 && val<=90):
          return true;
          case (val>=97 && val<=122):
          return true;
          default:
          return false;
        }
      }


      //function for checking a first character/a character of a specific position
      function checkValidChar(value){
        for(var i=0; i<value.length; i++){
          var val = value.charCodeAt(i);        
          switch(true)
          {
            case (val>=65 && val<=90): //a-z
            continue;
            case (val>=97 && val<=122): //A-Z
            continue;
            case (val == 32 || val == 45 || val == 46): // space , - , .
            continue;
            default:
            return false;
          }
        }
      }

      //function for checking a word/sentence
      function checkValidChar(value){
        for(var i=0; i<value.length; i++){
          var val = value.charCodeAt(i);        
          switch(true)
          {
            case (val>=65 && val<=90): //a-z
            console.log('A-Z');
            continue;
            case (val>=97 && val<=122): //A-Z
            console.log('a-z');
            continue;
            case (val == 32 || val == 45 || val == 46): // space , - , .
            console.log('Other caracter');
            continue;
            default:
            return false;
            
          }
        }
      }

      //function for checking a word/sentence for email
      function checkValidCharForEmail(value){
        for(var i=0; i<value.length; i++){
          var val = value.charCodeAt(i);        
          switch(true)
          {
            case (val>=65 && val<=90): //a-z
            console.log('A-Z');
            continue;
            case (val>=97 && val<=122): //A-Z
            console.log('a-z');
            continue;
            case (val>=48 && val<=57): //A-Z
            console.log('number 0-9');
            continue;
            case (val == 32 || val == 45 || val == 46 || val == 64 || val == 95): // space , - , . , @ , _
            console.log('Other caracter');
            continue;
            default:
            return false;
            
          }
        }
      }


      //array element length check
      function checkNameArray(fullName){

        for(var i=0 ; i< fullName.length ; i++)
        {

          if( fullName[i].length  == 0)
          {

            return 'space'; //multiple space detected
          }
          else if( fullName[i].length  == 1)
          {

            return 'short'; //name too short
          }


        }
        
        return 'okay'; //no problem ; validate it;
      }


      //name validation function
      function nameVal(){
        var obj = document.getElementById('IdInputName');
        var value = obj.value.trim();
        var BlankTd =  obj.parentNode.parentNode.lastElementChild;
        var valueSplitOnSpace = value.split(' ');


        if(value === ''){
          BlankTd.innerHTML = 'Name can not be empty';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;

        }        
        else if(!checkCharacter(value[0]))
        {
          BlankTd.innerHTML = 'First character invalid';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(checkValidChar(value)==false){
          BlankTd.innerHTML = 'Character invalid';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(value.search(' ')==-1){
          BlankTd.innerHTML = 'At least two name';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(value.search(' ')>-1){
          var responseT =  checkNameArray(valueSplitOnSpace);
          if(responseT == 'space')
          {
            BlankTd.innerHTML = 'multiple space detected';
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
            return;     
          }
          else if(responseT == 'short'){
            BlankTd.innerHTML = 'name too short';
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
            return;     
          }
          else if(responseT == 'okay')
          {
            BlankTd.innerHTML = 'Valid';
            BlankTd.style.background = 'green';
            BlankTd.style.color = 'white';
            return;     
          }

        }
      }


      //email validation
      function emailVal(){
        var obj = document.getElementById('IdInputEmail');
        var value = obj.value.trim();
        var BlankTd =  obj.parentNode.parentNode.lastElementChild;
        var valueSplitOnAtTheRateOf = value.split('@');


        if(value === ''){
          BlankTd.innerHTML = 'Name can not be empty';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;

        }
        else if(!checkCharacter(value[0]))
        {
          BlankTd.innerHTML = 'First character invalid';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(value.search(' ')>-1){
          BlankTd.innerHTML = 'Internal Space is not allowed';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(checkValidCharForEmail(value)==false){
          BlankTd.innerHTML = 'Character invalid';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(value.search('@')==-1){
          BlankTd.innerHTML = 'Must contain @';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(value.search('@')>-1){

          if(valueSplitOnAtTheRateOf.length>2){
            BlankTd.innerHTML = 'multiple @ detected';
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
            return;
          }
          var responseT =  checkNameArray(valueSplitOnAtTheRateOf);
          if(responseT == 'short'){
            BlankTd.innerHTML = 'name too short';
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
            return;     
          }
          else if(responseT == 'space')
          {
            BlankTd.innerHTML = 'value after @ expected';
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
            return;  
          }
          else{

            if(valueSplitOnAtTheRateOf[1].indexOf('.')>-1){
              var valueSplitOnDot = valueSplitOnAtTheRateOf[1].split('.');
              
              if(valueSplitOnDot.length>1){
                responseT =  checkNameArray(valueSplitOnDot);
                if(responseT == 'short'){
                  BlankTd.innerHTML = 'domain/extention too short';
                  BlankTd.style.background = 'red';
                  BlankTd.style.color = 'white';
                  return;     
                }
                else if(responseT == 'space')
                {
                  BlankTd.innerHTML = 'value after . expected';
                  BlankTd.style.background = 'red';
                  BlankTd.style.color = 'white';
                  return;  
                }
                else{
                  BlankTd.innerHTML = "valid";
                  BlankTd.style.background = 'green';
                  BlankTd.style.color = 'white';
                }
              }
              else{
                BlankTd.innerHTML = 'domain/extention missing '+valueSplitOnAtTheRateOf[1].search('.') + valueSplitOnAtTheRateOf[1];
                BlankTd.style.background = 'red';
                BlankTd.style.color = 'white';
              }

            }
            else{
              BlankTd.innerHTML = ' . expected';
              BlankTd.style.background = 'red';
              BlankTd.style.color = 'white';
            }
          }
        }



      }

      // Gender Validation complete
      function genderVal(){
        var radios = document.getElementsByName('Gender');
        var BlankTd = document.getElementById('IdGenderValStatus');
        var genderValueHolder = "";
        for (var i = 0, length = radios.length; i < length; i++)
        {
          if (radios[i].checked)
          {
            genderValueHolder =  radios[i].value;
            break;
          }

        }
        if(genderValueHolder==""){
          BlankTd.innerHTML = 'one item must be selected';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
        }
        else{
          BlankTd.innerHTML = "valid";
          BlankTd.style.background = 'green';
          BlankTd.style.color = 'white';
        }



      }

      function valBloodGroup(){
        var val = "";
        var obj = document.getElementById("IdInputBloodGroup");
        var BlankTd = document.getElementById('IdBloodGroupValStaus');
        var strUser = '';
        var strUser = obj.options[obj.selectedIndex].value;
        if(strUser == 'select' || strUser == '')
        {
          BlankTd.innerHTML = 'one item must be selected';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
        }
        else{
          BlankTd.innerHTML = "valid";
          BlankTd.style.background = 'green';
          BlankTd.style.color = 'white';
        }
      }


      function valDegree(){
        var obj = document.getElementsByName('degree');
        var BlankTd = document.getElementById('IdDegreeValStatus');
        var valueArray = [];
        for(var i =0; i<obj.length ; i++)
        {
          if(obj[i].checked == true)
          {
            valueArray.push(obj[i].value);
          }
        }
        if(valueArray.length>0)
        {
          BlankTd.innerHTML = "valid";
          BlankTd.style.background = 'green';
          BlankTd.style.color = 'white';
        }
        else{
          BlankTd.innerHTML = 'one item must be selected';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
        }
      }

      function validateDOB(){
        var day = document.getElementById('day');
        var month = document.getElementById('month');
        var year = document.getElementById('year');
        var BlankTd = document.getElementById('IdDobValStatus');

        
        //year validation
        if(year.value == "")
        {
          BlankTd.innerHTML = 'year can not be empty';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(year.value>2016 || year.value<1900){
          BlankTd.innerHTML = "year not in range";
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
          return;
        }
        else if(year.value<2016 || year.value>1900)
        {
          month.disabled = false;
          BlankTd.innerHTML = "select month";
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
        }
        //month validation
        if(month.value == "")
        {
          BlankTd.innerHTML = 'month can not be empty';
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
        }
        else if(month.value>12){
          BlankTd.innerHTML = "month can't be greater than 12";
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
        }
        else if(month.value<13)
        {
          day.disabled = false;
          BlankTd.innerHTML = "select day";
          BlankTd.style.background = 'red';
          BlankTd.style.color = 'white';
        }

        var leapYearStatus = checkLeapYear(year.value);
        //day validation
        if(day.value !="")
        {
          if(leapYearStatus==false && month.value == 2 && day.value > 28)
          {
            BlankTd.innerHTML = "Not a leap year detected; february can be more than 28";
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
          }
          else if(leapYearStatus==true && month.value == 2 && day.value > 29){
            BlankTd.innerHTML = "leap year detected; february cant be more than 29";
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
          }
          else if(month.value%2 == 0 && day.value>30){
            BlankTd.innerHTML = "day cant be more than 30";
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
          }
          else if(month.value%2 == 1 && day.value>31){
            BlankTd.innerHTML = "day cant be more than 31";
            BlankTd.style.background = 'red';
            BlankTd.style.color = 'white';
          }
          else{
            if(leapYearStatus == true){
              BlankTd.innerHTML = "valid ; leap year detected";
              BlankTd.style.background = 'green';
              BlankTd.style.color = 'white';
            }
            else{
              BlankTd.innerHTML = "valid ; not a leap year";
              BlankTd.style.background = 'green';
              BlankTd.style.color = 'white';
            }
            
          }

          
        }
        


      }

      function validateAll(){
        nameVal();
        emailVal();
        genderVal();
        valBloodGroup();
        valDegree();
        validateDOB();

      }

    </script>


  </body>
  </html>